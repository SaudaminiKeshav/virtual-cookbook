let recipesCopy=[];function homePageSpecificFunctions(){createRecipeDialog(),addSaveButtonClickListener(),dialogAddImageButtonClickListener(),loadRecipesFromLocalStorageOnRefresh()}function loadRecipesFromLocalStorageOnRefresh(){let e,t;if(null!=localStorage.getItem("Recipes")){e=JSON.parse(localStorage.getItem("Recipes"));for(let t=0;t<e.length;t++){createAndDisplayRecipeOnCard(e[t].key,e[t].ingredients,e[t].instructions,e[t].image)}}if(null!=localStorage.getItem("SearchedRecipes")){t=JSON.parse(localStorage.getItem("SearchedRecipes"));for(let e=0;e<t.length;e++){createAndDisplayRecipeOnCard(t[e].key,t[e].ingredients,t[e].instructions,t[e].image)}}}function createRecipeDialog(){!function(){"use strict";let e=document.querySelector(".dialog-button"),t=document.querySelector("#dialog");t.showModal||dialogPolyfill.registerDialog(t),e.addEventListener("click",function(){t.showModal()}),t.querySelector("button:not([disabled])").addEventListener("click",function(){t.close()})}()}function addSaveButtonClickListener(){$("#save-btn").on("click",function(){event.preventDefault();let e=$("#input-title").val().trim(),t=$("#input-ingredients").val().trim(),i=$("#input-instructions").val().trim(),n=$("#preview").attr("src");saveHomeDataToLocalStorage(e,t,i,n),createAndDisplayRecipeOnCard(e,t,i,n)})}function saveHomeDataToLocalStorage(e,t,i,n){let s;if(null===localStorage.getItem("Recipes"))console.log("storage is null"),recipesCopy.push({key:e,ingredients:t,instructions:i,image:n}),localStorage.setItem("Recipes",JSON.stringify(recipesCopy));else if(console.log("second condition"),s=JSON.parse(localStorage.getItem("Recipes")),console.log(s),recipesCopy.push({key:e,ingredients:t,instructions:i,image:n}),localStorage.setItem("Recipes",JSON.stringify(recipesCopy)),0==s.length&&0==recipesCopy.length)console.log("this condition was true"),recipesCopy.push({key:e,ingredients:t,instructions:i,image:n}),localStorage.setItem("Recipes",JSON.stringify(s));else if(0!=s.length&&0!=recipesCopy.length){console.log("third condition"),s.push({key:e,ingredients:t,instructions:i,image:n}),console.log(s),console.log("has been pushed"),localStorage.setItem("Recipes",JSON.stringify(s));for(let t=0;t<recipesCopy.length;t++)recipesCopy[t].key==e&&recipesCopy.splice(t,1);recipesCopy.push({key:e,ingredients:t,instructions:i,image:n}),localStorage.setItem("Recipes",JSON.stringify(s))}else{event.preventDefault();let a=JSON.parse(localStorage.getItem("Recipes"));recipesCopy.push(a),recipesCopy.push({key:e,ingredients:t,instructions:i,image:n}),localStorage.setItem("Recipes",JSON.stringify(s))}console.log(s)}function saveSearchDataToLocalStorage(e,t,i,n){let s=[];if(null===localStorage.getItem("SearchedRecipes"))console.log("it is null"),console.log(s),s.push({key:e,ingredients:t,instructions:i,image:n}),console.log(s),localStorage.setItem("SearchedRecipes",JSON.stringify(s));else{if((s=JSON.parse(localStorage.getItem("SearchedRecipes"))).push({key:e,ingredients:t,instructions:i,image:n}),console.log(s),console.log("has been pushed"),localStorage.setItem("SearchedRecipes",JSON.stringify(s)),0==s.length&&0==recipesCopy.length)recipesCopy.push({key:e,ingredients:t,instructions:i,image:n}),localStorage.setItem("SearchedRecipes",JSON.stringify(s));else if(0!=s.length&&0!=recipesCopy.length)for(let t=0;t<recipesCopy.length;t++)recipesCopy[t].key==e&&recipesCopy.splice(t,1);recipesCopy.push({key:e,ingredients:t,instructions:i,image:n}),localStorage.setItem("SearchedRecipes",JSON.stringify(s))}}function createAndDisplayRecipeOnCard(e,t,i,n){if(""!=e&&""!=t&&""!=i){document.querySelector("#dialog").close();let t=$("<div>");t.attr("id","recipe-card"),t.attr("class","demo-card-square mdl-card mdl-shadow--2dp recipe-card-div");let i=$("<img>");i.attr("class","mdl-card__title mdl-card--expand card-image"),i.attr("src",n),t.append(i);let s=$("<div>");s.attr("id","recipe-title"),s.attr("class","mdl-card__supporting-text");let a=$("<h2>");a.attr("id","card-title"),a.attr("class","mdl-card__title-text"),a.text(e),s.append(a),t.append(s);let l=$("<div>");l.attr("class","mdl-card__actions mdl-card--border");let r=$("<button>");r.attr("id","open-recipe-btn"),r.val(e),r.text("Open Recipe"),r.addClass("openButton"),l.append(r),t.append(l),$(".container-index").prepend(t)}}function dialogAddImageButtonClickListener(){$("#add-image-input").on("change",function(e){e.preventDefault(),$(this).closest(".modal").one("hidden.bs.modal",function(){console.log("The button that closed the modal is: ",$button)}),getImage(this)})}function getImage(e){let t,i="";e.files&&e.files[0]&&(event.preventDefault(),(t=new FileReader).onload=function(e){$("#preview").attr("src",e.target.result),i=e.target.value},t.readAsDataURL(e.files[0]))}$(document).ready(function(){function e(e){let t=e.charAt(0).toUpperCase();return e=t+e.slice(1)}let t=[];$("#ingredient-add").on("click",function(){if(event.preventDefault(),""!==$("#ingredient-input").val().trim()){{let i=e($("#ingredient-input").val()),n=$("<li>");n.addClass("ingredient-to-search"),n.text(i),t.push(i),$(".ingredient-list-search").append(n)}$("#ingredient-input").val("")}}),$("#recipe-search").on("click",function(){if(0!==t.length){event.preventDefault();let i="https://api.spoonacular.com/recipes/findByIngredients?apiKey="+"2c9a3a3c72c5460eb5b28bd2ae462f90"+"&ingredients="+t.join()+"&number="+5;$.ajax({url:i,method:"GET"}).then(function(t){for(let i=0;i<5;i++){let n=e(t[i].title);$(`#title${i+1}`).text(`- ${n}`)}}),$("#card-for-recipe-list").removeClass("hidden")}}),recipesTitles=[],$("#save-recipe-button").on("click",function(){$("#save-recipe-button").addClass("hidden"),$(".saved-to-recipes").removeClass("hidden");let e=$("#recipe-1").text(),t=$("#recipe-image-1").attr("src"),i=$("#ingredients1").text(),n=$("#recipe-contents-1").text();!function(e,t){let i=$("<div>");i.attr("id","recipe-card"),i.attr("class","demo-card-square mdl-card mdl-shadow--2dp");let n=$("<div>");n.attr("class","mdl-card__title mdl-card--expand"),i.append(n);let s=$("<img>");s.attr("src",t),n.append(s);let a=$("<div>");a.attr("id","recipe-title"),a.attr("class","mdl-card__supporting-text");let l=$("<h2>");l.attr("id","card-title"),l.attr("class","mdl-card__title-text"),l.text(e),a.append(l),i.append(a);let r=$("<div>");r.attr("class","mdl-card__actions mdl-card--border");let c=$("<a>");c.attr("id","open-recipe-btn"),c.attr("class","mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect"),c.text("Open Recipe"),r.append(c),i.append(r),$(".container-index").prepend(i)}(e,t),saveSearchDataToLocalStorage(e,i,n,t)}),$("body").on("click",".click-title",function(){let i=event.target.value;if($(".saved-to-recipes").addClass("hidden"),$("#save-recipe-button").removeClass("hidden"),"1"===i){$("#recipe1").removeClass("hidden"),$(".saved-to-recipes").addClass("hidden"),$("#save-recipe-button").removeClass("hidden");let i="2c9a3a3c72c5460eb5b28bd2ae462f90",n=t.join(),s="https://api.spoonacular.com/recipes/findByIngredients?apiKey="+i+"&ingredients="+n+"&number="+5;$.ajax({url:s,method:"GET"}).then(function(t){let n=e(t[0].title);$("#recipe-1").text(n),$("#recipe-image-1").attr("src",t[0].image);let s=t[0].missedIngredients.length,a=[];$("#ingredients1").empty();for(let i=0;i<s;i++){a.push(t[0].missedIngredients[i].name);let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[0].missedIngredients[i].name),n.text(e(n.text())),$("#ingredients1").append(n)}let l="https://api.spoonacular.com/recipes/"+t[0].id+"/analyzedInstructions?apiKey="+i;$.ajax({url:l,method:"GET"}).then(function(t){if(0===t.length){let e=$("<li></li>");e.addClass("search-li-tags"),$("#recipe-contents-1").empty(),e.text("No instructions found"),$("#recipe-contents-1").append(e)}else{$("#recipe-contents-1").empty();for(let i=0;i<t.length;i++){let n=t[i].steps;for(let s=0;s<n.length;s++){let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[i].steps[s].step),$("#recipe-contents-1").append(n);let l=t[i].steps[s].ingredients.length;for(let n=0;n<l;n++)if(0===t[i].steps[s].ingredients[n].length);else if(a.includes(t[i].steps[s].ingredients[n].name));else{a.push(t[i].steps[s].ingredients[n].name);let l=$("<li></li>");l.addClass("search-li-tags"),l.text(t[i].steps[s].ingredients[n].name),l.text(e(l.text())),$("#ingredients1").append(l)}}}}})})}else if("2"===i){$("#recipe1").removeClass("hidden"),$(".saved-to-recipes").addClass("hidden"),$("#save-recipe-button").removeClass("hidden");let i="2c9a3a3c72c5460eb5b28bd2ae462f90",n=t.join(),s="https://api.spoonacular.com/recipes/findByIngredients?apiKey="+i+"&ingredients="+n+"&number="+5;$.ajax({url:s,method:"GET"}).then(function(t){let n=e(t[1].title);$("#recipe-1").text(n),$("#recipe-image-1").attr("src",t[1].image);let s=t[1].missedIngredients.length,a=[];$("#ingredients1").empty();for(let i=0;i<s;i++){a.push(t[1].missedIngredients[i].name);let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[1].missedIngredients[i].name),n.text(e(n.text())),$("#ingredients1").append(n)}let l="https://api.spoonacular.com/recipes/"+t[1].id+"/analyzedInstructions?apiKey="+i;$.ajax({url:l,method:"GET"}).then(function(t){if(0===t.length){let e=$("<li></li>");e.addClass("search-li-tags"),$("#recipe-contents-1").empty(),e.text("No instructions found"),$("#recipe-contents-1").append(e)}else{$("#recipe-contents-1").empty();for(let i=0;i<t.length;i++){let n=t[i].steps;for(let s=0;s<n.length;s++){let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[i].steps[s].step),$("#recipe-contents-1").append(n);let l=t[i].steps[s].ingredients.length;for(let n=0;n<l;n++)if(0===t[i].steps[s].ingredients[n].length);else if(a.includes(t[i].steps[s].ingredients[n].name));else{a.push(t[i].steps[s].ingredients[n].name);let l=$("<li></li>");l.addClass("search-li-tags"),l.text(t[i].steps[s].ingredients[n].name),l.text(e(l.text())),$("#ingredients1").append(l)}}}}})})}else if("3"===i){$("#recipe1").removeClass("hidden"),$(".saved-to-recipes").addClass("hidden"),$("#save-recipe-button").removeClass("hidden");let i="2c9a3a3c72c5460eb5b28bd2ae462f90",n=t.join(),s="https://api.spoonacular.com/recipes/findByIngredients?apiKey="+i+"&ingredients="+n+"&number="+5;$.ajax({url:s,method:"GET"}).then(function(t){let n=e(t[2].title);$("#recipe-1").text(n),$("#recipe-image-1").attr("src",t[2].image);let s=t[2].missedIngredients.length,a=[];$("#ingredients1").empty();for(let i=0;i<s;i++){a.push(t[2].missedIngredients[i].name);let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[2].missedIngredients[i].name),n.text(e(n.text())),$("#ingredients1").append(n)}let l="https://api.spoonacular.com/recipes/"+t[2].id+"/analyzedInstructions?apiKey="+i;$.ajax({url:l,method:"GET"}).then(function(t){if(0===t.length){let e=$("<li></li>");e.addClass("search-li-tags"),$("#recipe-contents-1").empty(),e.text("No instructions found"),$("#recipe-contents-1").append(e)}else{$("#recipe-contents-1").empty();for(let i=0;i<t.length;i++){let n=t[i].steps;for(let s=0;s<n.length;s++){let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[i].steps[s].step),$("#recipe-contents-1").append(n);let l=t[i].steps[s].ingredients.length;for(let n=0;n<l;n++)if(0===t[i].steps[s].ingredients[n].length);else if(a.includes(t[i].steps[s].ingredients[n].name));else{a.push(t[i].steps[s].ingredients[n].name);let l=$("<li></li>");l.addClass("search-li-tags"),l.text(t[i].steps[s].ingredients[n].name),l.text(e(l.text())),$("#ingredients1").append(l)}}}}})})}else if("4"===i){$("#recipe1").removeClass("hidden"),$(".saved-to-recipes").addClass("hidden"),$("#save-recipe-button").removeClass("hidden");let i="2c9a3a3c72c5460eb5b28bd2ae462f90",n=t.join(),s="https://api.spoonacular.com/recipes/findByIngredients?apiKey="+i+"&ingredients="+n+"&number="+5;$.ajax({url:s,method:"GET"}).then(function(t){let n=e(t[3].title);$("#recipe-1").text(n),$("#recipe-image-1").attr("src",t[3].image);let s=t[3].missedIngredients.length,a=[];$("#ingredients1").empty();for(let i=0;i<s;i++){a.push(t[3].missedIngredients[i].name);let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[3].missedIngredients[i].name),n.text(e(n.text())),$("#ingredients1").append(n)}let l="https://api.spoonacular.com/recipes/"+t[3].id+"/analyzedInstructions?apiKey="+i;$.ajax({url:l,method:"GET"}).then(function(t){if(0===t.length){let e=$("<li></li>");e.addClass("search-li-tags"),$("#recipe-contents-1").empty(),e.text("No instructions found"),$("#recipe-contents-1").append(e)}else{$("#recipe-contents-1").empty();for(let i=0;i<t.length;i++){let n=t[i].steps;for(let s=0;s<n.length;s++){let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[i].steps[s].step),$("#recipe-contents-1").append(n);let l=t[i].steps[s].ingredients.length;for(let n=0;n<l;n++)if(0===t[i].steps[s].ingredients[n].length);else if(console.log(t[i].steps[s].ingredients[n].name),a.includes(t[i].steps[s].ingredients[n].name));else{a.push(t[i].steps[s].ingredients[n].name);let l=$("<li></li>");l.addClass("search-li-tags"),l.text(t[i].steps[s].ingredients[n].name),l.text(e(l.text())),$("#ingredients1").append(l)}}}}})})}else if("5"===i){$("#recipe1").removeClass("hidden"),$(".saved-to-recipes").addClass("hidden"),$("#save-recipe-button").removeClass("hidden");let i="2c9a3a3c72c5460eb5b28bd2ae462f90",n=t.join(),s="https://api.spoonacular.com/recipes/findByIngredients?apiKey="+i+"&ingredients="+n+"&number="+5;$.ajax({url:s,method:"GET"}).then(function(t){let n=e(t[4].title);$("#recipe-1").text(n),$("#recipe-image-1").attr("src",t[4].image);let s=t[4].missedIngredients.length,a=[];$("#ingredients1").empty();for(let i=0;i<s;i++){a.push(t[4].missedIngredients[i].name);let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[4].missedIngredients[i].name),n.text(e(n.text())),$("#ingredients1").append(n)}let l="https://api.spoonacular.com/recipes/"+t[4].id+"/analyzedInstructions?apiKey="+i;$.ajax({url:l,method:"GET"}).then(function(t){if(0===t.length){let e=$("<li></li>");e.addClass("search-li-tags"),$("#recipe-contents-1").empty(),e.text("No instructions found"),$("#recipe-contents-1").append(e)}else{$("#recipe-contents-1").empty();for(let i=0;i<t.length;i++){let n=t[i].steps;for(let s=0;s<n.length;s++){let n=$("<li></li>");n.addClass("search-li-tags"),n.text(t[i].steps[s].step),$("#recipe-contents-1").append(n);let l=t[i].steps[s].ingredients.length;for(let n=0;n<l;n++)if(0===t[i].steps[s].ingredients[n].length);else if(a.includes(t[i].steps[s].ingredients[n].name));else{a.push(t[i].steps[s].ingredients[n].name);let l=$("<li></li>");l.addClass("search-li-tags"),l.text(t[i].steps[s].ingredients[n].name),l.text(e(l.text())),$("#ingredients1").append(l)}}}}})})}})}),$("body").on("click",".openButton",function(){let e=JSON.parse(localStorage.getItem("Recipes")),t=JSON.parse(localStorage.getItem("SearchedRecipes"));for(console.log(event.target.value),console.log(e),console.log(t),i=0;i<e.length;i++)if(e[i].key.includes(event.target.value)){let t=event.target.value;console.log("inclded in Recipes"),console.log(t),$("#recipe-2").text(t),console.log(e[i].ingredients),$("#ingredients2").text(e[i].ingredients),console.log(e[i].instructions),$("#recipe-contents-2").text(e[i].instructions),console.log(e[i].image),$("#recipe-image-2").attr("src",e[i].image),$(".container-index").addClass("hidden"),$(".individual-recipes").removeClass("hidden")}else console.log("not included in Recipes");for(j=0;j<t.length;j++)if(t[j].key.includes(event.target.value)){let e=event.target.value;console.log("included in SearchRecipes"),console.log(e),$("#recipe-2").text(e),console.log(t[j].ingredients),$("#ingredients2").text(t[j].ingredients),console.log(t[j].instructions),$("#recipe-contents-2").text(t[j].instructions),console.log(t[j].image),$("#recipe-image-2").attr("src",t[j].image),$(".container-index").addClass("hidden"),$(".individual-recipes").removeClass("hidden")}else console.log("not included in SearchRecipes")}),$("body").on("click","#close",function(){$(".container-index").removeClass("hidden"),$(".individual-recipes").addClass("hidden")});